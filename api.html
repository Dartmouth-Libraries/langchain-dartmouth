

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Embeddings &mdash; langchain_dartmouth 0.2.8 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/autodoc_pydantic.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=fe6c864c" />

  
    <link rel="shortcut icon" href="_static/dartmouth-libraries-spark.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=b01fafc3"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="langchain_dartmouth – LangChain components for Dartmouth’s on-premise models" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            langchain_dartmouth
              <img src="_static/langchain_dartmouth-logo-light.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Embeddings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#langchain_dartmouth.embeddings.DartmouthEmbeddings"><code class="docutils literal notranslate"><span class="pre">DartmouthEmbeddings</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#langchain_dartmouth.embeddings.DartmouthEmbeddings.aembed_documents"><code class="docutils literal notranslate"><span class="pre">DartmouthEmbeddings.aembed_documents()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#langchain_dartmouth.embeddings.DartmouthEmbeddings.aembed_query"><code class="docutils literal notranslate"><span class="pre">DartmouthEmbeddings.aembed_query()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#langchain_dartmouth.embeddings.DartmouthEmbeddings.embed_documents"><code class="docutils literal notranslate"><span class="pre">DartmouthEmbeddings.embed_documents()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#langchain_dartmouth.embeddings.DartmouthEmbeddings.embed_query"><code class="docutils literal notranslate"><span class="pre">DartmouthEmbeddings.embed_query()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-langchain_dartmouth.llms">Large Language Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#langchain_dartmouth.llms.DartmouthLLM"><code class="docutils literal notranslate"><span class="pre">DartmouthLLM</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#langchain_dartmouth.llms.DartmouthLLM.ainvoke"><code class="docutils literal notranslate"><span class="pre">DartmouthLLM.ainvoke()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#langchain_dartmouth.llms.DartmouthLLM.invoke"><code class="docutils literal notranslate"><span class="pre">DartmouthLLM.invoke()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#langchain_dartmouth.llms.ChatDartmouth"><code class="docutils literal notranslate"><span class="pre">ChatDartmouth</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#langchain_dartmouth.llms.ChatDartmouth.ainvoke"><code class="docutils literal notranslate"><span class="pre">ChatDartmouth.ainvoke()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#langchain_dartmouth.llms.ChatDartmouth.invoke"><code class="docutils literal notranslate"><span class="pre">ChatDartmouth.invoke()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-langchain_dartmouth.retrievers.document_compressors">Reranking</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#langchain_dartmouth.retrievers.document_compressors.DartmouthReranker"><code class="docutils literal notranslate"><span class="pre">DartmouthReranker</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#langchain_dartmouth.retrievers.document_compressors.DartmouthReranker.compress_documents"><code class="docutils literal notranslate"><span class="pre">DartmouthReranker.compress_documents()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">langchain_dartmouth</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Embeddings</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-langchain_dartmouth.embeddings">
<span id="embeddings"></span><h1>Embeddings<a class="headerlink" href="#module-langchain_dartmouth.embeddings" title="Link to this heading"></a></h1>
<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="langchain_dartmouth.embeddings.DartmouthEmbeddings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">langchain_dartmouth.embeddings.</span></span><span class="sig-name descname"><span class="pre">DartmouthEmbeddings</span></span><a class="headerlink" href="#langchain_dartmouth.embeddings.DartmouthEmbeddings" title="Link to this definition"></a></dt>
<dd><p>Embedding models deployed on Dartmouth’s cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the embedding model to use, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;bge-large-en-v1-5&quot;</span></code>.</p></li>
<li><p><strong>model_kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keyword arguments to pass to the model.</p></li>
<li><p><strong>dartmouth_api_key</strong> (<em>str</em><em>, </em><em>optional</em>) – A Dartmouth API key (obtainable from <a class="reference external" href="https://developer.dartmouth.edu">https://developer.dartmouth.edu</a>). If not specified, it is attempted to be inferred from an environment variable <code class="docutils literal notranslate"><span class="pre">DARTMOUTH_API_KEY</span></code>.</p></li>
<li><p><strong>authenticator</strong> (<em>Callable</em><em>, </em><em>optional</em>) – A Callable returning a JSON Web Token (JWT) for authentication. Only needed for special use cases.</p></li>
<li><p><strong>jwt_url</strong> (<em>str</em><em>, </em><em>optional</em>) – URL of the Dartmouth API endpoint returning a JSON Web Token (JWT).</p></li>
<li><p><strong>embeddings_server_url</strong> (<em>str</em><em>, </em><em>optional</em>) – URL pointing to an embeddings endpoint, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;https://ai-api.dartmouth.edu/tei/&quot;</span></code>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>With an environment variable named <code class="docutils literal notranslate"><span class="pre">DARTMOUTH_API_KEY</span></code> pointing to your key obtained from <a class="reference external" href="https://developer.dartmouth.edu">https://developer.dartmouth.edu</a>, using a Dartmouth-hosted embedding model only takes a few lines of code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain_dartmouth.embeddings</span> <span class="kn">import</span> <span class="n">DartmouthEmbeddingsModel</span>

<span class="n">embeddings</span> <span class="o">=</span> <span class="n">DartmouthEmbeddingsModel</span><span class="p">()</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">embeddings</span><span class="o">.</span><span class="n">embed_query</span><span class="p">(</span><span class="s2">&quot;Hello? Is there anybody in there?&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_dartmouth.embeddings.DartmouthEmbeddings.aembed_documents">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aembed_documents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">texts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#langchain_dartmouth.embeddings.DartmouthEmbeddings.aembed_documents" title="Link to this definition"></a></dt>
<dd><p>Async Call to the embedding endpoint to retrieve the embeddings of multiple texts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>str</em>) – The list of texts to embed.</p></li>
<li><p><strong>texts</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Embeddings for the texts.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[List[float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="langchain_dartmouth.embeddings.DartmouthEmbeddings.aembed_query">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aembed_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#langchain_dartmouth.embeddings.DartmouthEmbeddings.aembed_query" title="Link to this definition"></a></dt>
<dd><p>Async Call to the embedding endpoint to retrieve the embedding of the query text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>text</strong> (<em>str</em>) – The text to embed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Embeddings for the text.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="langchain_dartmouth.embeddings.DartmouthEmbeddings.embed_documents">
<span class="sig-name descname"><span class="pre">embed_documents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">texts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#langchain_dartmouth.embeddings.DartmouthEmbeddings.embed_documents" title="Link to this definition"></a></dt>
<dd><p>Call out to the embedding endpoint to retrieve the embeddings of multiple texts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>str</em>) – The list of texts to embed.</p></li>
<li><p><strong>texts</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Embeddings for the texts.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[List[float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="langchain_dartmouth.embeddings.DartmouthEmbeddings.embed_query">
<span class="sig-name descname"><span class="pre">embed_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#langchain_dartmouth.embeddings.DartmouthEmbeddings.embed_query" title="Link to this definition"></a></dt>
<dd><p>Call out to the embedding endpoint to retrieve the embedding of the query text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>text</strong> (<em>str</em>) – The text to embed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Embeddings for the text.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[float]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-langchain_dartmouth.llms">
<span id="large-language-models"></span><h1>Large Language Models<a class="headerlink" href="#module-langchain_dartmouth.llms" title="Link to this heading"></a></h1>
<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="langchain_dartmouth.llms.DartmouthLLM">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">langchain_dartmouth.llms.</span></span><span class="sig-name descname"><span class="pre">DartmouthLLM</span></span><a class="headerlink" href="#langchain_dartmouth.llms.DartmouthLLM" title="Link to this definition"></a></dt>
<dd><p>Dartmouth-deployed Large Language Models. Use this class for non-chat models
(e.g., <a class="reference external" href="https://huggingface.co/codellama/CodeLlama-13b-Python-hf">CodeLlama 13B</a>).</p>
<p>This class does <strong>not</strong> format the prompt to adhere to any required templates.
The string you pass to it is exactly the string received by the LLM. If the
desired model requires a chat template (e.g.,
<a class="reference external" href="https://llama.meta.com/docs/model-cards-and-prompt-formats/llama3_1/">Llama 3.1 Instruct</a>),
you may want to use <a class="reference internal" href="#langchain_dartmouth.llms.ChatDartmouth" title="langchain_dartmouth.llms.ChatDartmouth"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChatDartmouth</span></code></a> instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the model to use, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;codellama-13b-python-hf&quot;</span></code>.</p></li>
<li><p><strong>temperature</strong> (<em>float</em><em>, </em><em>optional</em>) – Temperature to use for sampling (higher temperature means more varied outputs), defaults to <code class="docutils literal notranslate"><span class="pre">0.8</span></code>.</p></li>
<li><p><strong>max_new_tokens</strong> (<em>int</em>) – Maximum number of generated tokens, defaults to <code class="docutils literal notranslate"><span class="pre">512</span></code>.</p></li>
<li><p><strong>streaming</strong> (<em>bool</em>) – Whether to generate a stream of tokens asynchronously, defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of highest probability vocabulary tokens to keep for top-k-filtering.</p></li>
<li><p><strong>top_p</strong> (<em>float</em><em>, </em><em>optional</em>) – If set to &lt; 1, only the smallest set of most probable tokens with probabilities that add up to <code class="docutils literal notranslate"><span class="pre">top_p</span></code> or higher are kept for generation, defaults to <code class="docutils literal notranslate"><span class="pre">0.95</span></code>.</p></li>
<li><p><strong>typical_p</strong> (<em>float</em><em>, </em><em>optional</em>) – Typical Decoding mass. See <a class="reference external" href="https://arxiv.org/abs/2202.00666">Typical Decoding for Natural Language Generation</a> for more information, defaults to <code class="docutils literal notranslate"><span class="pre">0.95</span></code>.</p></li>
<li><p><strong>repetition_penalty</strong> (<em>float</em><em>, </em><em>optional</em>) – The parameter for repetition penalty. 1.0 means no penalty. See <a class="reference external" href="https://arxiv.org/pdf/1909.05858.pdf">this paper</a> for more details.</p></li>
<li><p><strong>return_full_text</strong> (<em>bool</em>) – Whether to prepend the prompt to the generated text, defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
<li><p><strong>truncate</strong> (<em>int</em><em>, </em><em>optional</em>) – Truncate inputs tokens to the given size</p></li>
<li><p><strong>stop_sequences</strong> (<em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Stop generating tokens if a member of <code class="docutils literal notranslate"><span class="pre">stop_sequences</span></code> is generated.</p></li>
<li><p><strong>seed</strong> (<em>int</em><em>, </em><em>optional</em>) – Random sampling seed</p></li>
<li><p><strong>do_sample</strong> (<em>bool</em>) – Activate logits sampling, defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>watermark</strong> (<em>bool</em>) – Watermarking with <a class="reference external" href="https://arxiv.org/abs/2301.10226">A Watermark for Large Language Models</a>, defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
<li><p><strong>model_kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Parameters to pass to the model (see the documentation of LangChain’s <a class="reference external" href="https://api.python.langchain.com/en/latest/llms/langchain_community.llms.huggingface_text_gen_inference.HuggingFaceTextGenInference.html">HuggingFaceTextGenInference class</a>.)</p></li>
<li><p><strong>dartmouth_api_key</strong> (<em>str</em><em>, </em><em>optional</em>) – A Dartmouth API key (obtainable from <a class="reference external" href="https://developer.dartmouth.edu">https://developer.dartmouth.edu</a>). If not specified, it is attempted to be inferred from an environment variable DARTMOUTH_API_KEY.</p></li>
<li><p><strong>authenticator</strong> (<em>Callable</em><em>, </em><em>optional</em>) – A Callable returning a JSON Web Token (JWT) for authentication.</p></li>
<li><p><strong>jwt_url</strong> (<em>str</em><em>, </em><em>optional</em>) – URL of the Dartmouth API endpoint returning a JSON Web Token (JWT).</p></li>
<li><p><strong>inference_server_url</strong> (<em>str</em>) – URL pointing to an inference endpoint, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;https://ai-api.dartmouth.edu/tgi/&quot;</span></code>.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout in seconds, defaults to <code class="docutils literal notranslate"><span class="pre">120</span></code></p></li>
<li><p><strong>server_kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Holds any text-generation-inference server parameters not explicitly specified</p></li>
<li><p><strong>**_</strong> – Additional keyword arguments are silently discarded. This is to ensure interface compatibility with other langchain components.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>With an environment variable named <code class="docutils literal notranslate"><span class="pre">DARTMOUTH_API_KEY</span></code> pointing to your key obtained from <a class="reference external" href="https://developer.dartmouth.edu">https://developer.dartmouth.edu</a>, using a Dartmouth-hosted LLM only takes a few lines of code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain_dartmouth.llms</span> <span class="kn">import</span> <span class="n">DartmouthLLM</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">DartmouthLLM</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;codellama-13b-hf&quot;</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">llm</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="s2">&quot;Write a Python script to swap two variables.&quot;&quot;)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_dartmouth.llms.DartmouthLLM.ainvoke">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ainvoke</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#langchain_dartmouth.llms.DartmouthLLM.ainvoke" title="Link to this definition"></a></dt>
<dd><p>Asynchronously transforms a single input into an output.</p>
<p>See <a class="reference external" href="https://python.langchain.com/v0.1/docs/expression_language/interface/">LangChain’s API documentation</a> for details on how to use this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The LLM’s completion of the input string.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="langchain_dartmouth.llms.DartmouthLLM.invoke">
<span class="sig-name descname"><span class="pre">invoke</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#langchain_dartmouth.llms.DartmouthLLM.invoke" title="Link to this definition"></a></dt>
<dd><p>Transforms a single input into an output.</p>
<p>See <a class="reference external" href="https://python.langchain.com/v0.1/docs/expression_language/interface/">LangChain’s API documentation</a> for details on how to use this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The LLM’s completion of the input string.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="langchain_dartmouth.llms.ChatDartmouth">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">langchain_dartmouth.llms.</span></span><span class="sig-name descname"><span class="pre">ChatDartmouth</span></span><a class="headerlink" href="#langchain_dartmouth.llms.ChatDartmouth" title="Link to this definition"></a></dt>
<dd><p>Dartmouth-deployed Chat models (also known as Instruct models).</p>
<p>Use this class if you want to use a model that uses a chat template
(e.g., <a class="reference external" href="https://huggingface.co/meta-llama/meta-llama-3.1-8b-instruct">Llama 3.1 8B Instruct</a>).</p>
<p>All prompts are automatically formatted to adhere to the chosen model’s
chat template. If you need more control over the exact string sent to the model,
you may want to use <a class="reference internal" href="#langchain_dartmouth.llms.DartmouthLLM" title="langchain_dartmouth.llms.DartmouthLLM"><code class="xref py py-class docutils literal notranslate"><span class="pre">DartmouthLLM</span></code></a> instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<em>str</em>) – Name of the model to use, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;llama-3-1-8b-instruct&quot;</span></code>.</p></li>
<li><p><strong>streaming</strong> (<em>bool</em>) – Whether to stream the results or not, defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>temperature</strong> (<em>float</em>) – Temperature to use for sampling (higher temperature means more varied outputs), defaults to <code class="docutils literal notranslate"><span class="pre">0.7</span></code>.</p></li>
<li><p><strong>max_tokens</strong> (<em>int</em>) – Maximum number of tokens to generate, defaults to 512</p></li>
<li><p><strong>logprobs</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to return logprobs</p></li>
<li><p><strong>stream_usage</strong> (<em>bool</em>) – Whether to include usage metadata in streaming output. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, additional message chunks will be generated during the stream including usage metadata, defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>presence_penalty</strong> (<em>float</em><em>, </em><em>optional</em>) – Penalizes repeated tokens.</p></li>
<li><p><strong>frequency_penalty</strong> (<em>float</em><em>, </em><em>optional</em>) – Penalizes repeated tokens according to frequency.</p></li>
<li><p><strong>seed</strong> (<em>int</em><em>, </em><em>optional</em>) – Seed for generation</p></li>
<li><p><strong>top_logprobs</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of most likely tokens to return at each token position, each with an associated log probability. <code class="docutils literal notranslate"><span class="pre">logprobs</span></code> must be set to true if this parameter is used.</p></li>
<li><p><strong>logit_bias</strong> (<em>dict</em><em>, </em><em>optional</em>) – Modify the likelihood of specified tokens appearing in the completion.</p></li>
<li><p><strong>n</strong> (<em>int</em>) – Number of chat completions to generate for each prompt, defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p><strong>top_p</strong> (<em>float</em><em>, </em><em>optional</em>) – Total probability mass of tokens to consider at each step.</p></li>
<li><p><strong>model_kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Holds any model parameters valid for <code class="docutils literal notranslate"><span class="pre">create</span></code> call not explicitly specified.</p></li>
<li><p><strong>dartmouth_api_key</strong> (<em>str</em><em>, </em><em>optional</em>) – A Dartmouth API key (obtainable from <a class="reference external" href="https://developer.dartmouth.edu">https://developer.dartmouth.edu</a>). If not specified, it is attempted to be inferred from an environment variable DARTMOUTH_API_KEY.</p></li>
<li><p><strong>authenticator</strong> (<em>Callable</em><em>, </em><em>optional</em>) – A Callable returning a JSON Web Token (JWT) for authentication.</p></li>
<li><p><strong>jwt_url</strong> (<em>str</em><em>, </em><em>optional</em>) – URL of the Dartmouth API endpoint returning a JSON Web Token (JWT).</p></li>
<li><p><strong>inference_server_url</strong> (<em>str</em><em>, </em><em>optional</em>) – URL pointing to an inference endpoint, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;https://ai-api.dartmouth.edu/tgi/&quot;</span></code>.</p></li>
<li><p><strong>**_</strong> – Additional keyword arguments are silently discarded. This is to ensure interface compatibility with other langchain components.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>With an environment variable named <code class="docutils literal notranslate"><span class="pre">DARTMOUTH_API_KEY</span></code> pointing to your key obtained from <a class="reference external" href="https://developer.dartmouth.edu">https://developer.dartmouth.edu</a>, using a Dartmouth-hosted LLM only takes a few lines of code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain_dartmouth.llms</span> <span class="kn">import</span> <span class="n">ChatDartmouth</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">ChatDartmouth</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;llama-3-8b-instruct&quot;</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">llm</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="s2">&quot;Hi there!&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The required prompt format is enforced automatically when you are using <code class="docutils literal notranslate"><span class="pre">ChatDartmouth</span></code>.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_dartmouth.llms.ChatDartmouth.ainvoke">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ainvoke</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#langchain_dartmouth.llms.ChatDartmouth.ainvoke" title="Link to this definition"></a></dt>
<dd><p>Asynchronously invokes the model to get a response to a query.</p>
<p>See <a class="reference external" href="https://python.langchain.com/v0.1/docs/expression_language/interface/">LangChain’s API documentation</a> for details on how to use this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The LLM’s response to the prompt.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>BaseMessage</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="langchain_dartmouth.llms.ChatDartmouth.invoke">
<span class="sig-name descname"><span class="pre">invoke</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#langchain_dartmouth.llms.ChatDartmouth.invoke" title="Link to this definition"></a></dt>
<dd><p>Invokes the model to get a response to a query.</p>
<p>See <a class="reference external" href="https://python.langchain.com/v0.1/docs/expression_language/interface/">LangChain’s API documentation</a> for details on how to use this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The LLM’s response to the prompt.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>BaseMessage</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-langchain_dartmouth.retrievers.document_compressors">
<span id="reranking"></span><h1>Reranking<a class="headerlink" href="#module-langchain_dartmouth.retrievers.document_compressors" title="Link to this heading"></a></h1>
<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="langchain_dartmouth.retrievers.document_compressors.DartmouthReranker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">langchain_dartmouth.retrievers.document_compressors.</span></span><span class="sig-name descname"><span class="pre">DartmouthReranker</span></span><a class="headerlink" href="#langchain_dartmouth.retrievers.document_compressors.DartmouthReranker" title="Link to this definition"></a></dt>
<dd><p>Reranks documents using a reranking model deployed in the Dartmouth cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the embedding model to use, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;bge-reranker-v2-m3&quot;</span></code>.</p></li>
<li><p><strong>top_n</strong> (<em>int</em>) – Number of documents to return, defaults to <code class="docutils literal notranslate"><span class="pre">3</span></code></p></li>
<li><p><strong>dartmouth_api_key</strong> (<em>str</em><em>, </em><em>optional</em>) – A Dartmouth API key (obtainable from <a class="reference external" href="https://developer.dartmouth.edu">https://developer.dartmouth.edu</a>). If not specified, it is attempted to be inferred from an environment variable <code class="docutils literal notranslate"><span class="pre">DARTMOUTH_API_KEY</span></code>.</p></li>
<li><p><strong>authenticator</strong> (<em>Callable</em><em>, </em><em>optional</em>) – A Callable returning a JSON Web Token (JWT) for authentication.</p></li>
<li><p><strong>jwt_url</strong> (<em>str</em><em>, </em><em>optional</em>) – URL of the Dartmouth API endpoint returning a JSON Web Token (JWT).</p></li>
<li><p><strong>embeddings_server_url</strong> (<em>str</em><em>, </em><em>optional</em>) – URL pointing to an embeddings endpoint, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;https://ai-api.dartmouth.edu/tei/&quot;</span></code>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>With an environment variable named <code class="docutils literal notranslate"><span class="pre">DARTMOUTH_API_KEY</span></code> pointing to your key obtained from <a class="reference external" href="https://developer.dartmouth.edu">https://developer.dartmouth.edu</a>, using a Dartmouth-hosted Reranker only takes a few lines of code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain.docstore.document</span> <span class="kn">import</span> <span class="n">Document</span>

<span class="kn">from</span> <span class="nn">langchain_dartmouth.retrievers.document_compressors</span> <span class="kn">import</span> <span class="n">DartmouthReranker</span>

<span class="n">docs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">page_content</span><span class="o">=</span><span class="s2">&quot;Deep Learning is not...&quot;</span><span class="p">),</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">page_content</span><span class="o">=</span><span class="s2">&quot;Deep learning is...&quot;</span><span class="p">),</span>
<span class="p">]</span>
<span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;What is Deep Learning?&quot;</span>
<span class="n">reranker</span> <span class="o">=</span> <span class="n">DartmouthReranker</span><span class="p">()</span>
<span class="n">ranked_docs</span> <span class="o">=</span> <span class="n">reranker</span><span class="o">.</span><span class="n">compress_documents</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">documents</span><span class="o">=</span><span class="n">docs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ranked_docs</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_dartmouth.retrievers.document_compressors.DartmouthReranker.compress_documents">
<span class="sig-name descname"><span class="pre">compress_documents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">documents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callbacks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#langchain_dartmouth.retrievers.document_compressors.DartmouthReranker.compress_documents" title="Link to this definition"></a></dt>
<dd><p>Returns the most relevant documents with respect to a query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>documents</strong> (<em>Sequence</em><em>[</em><em>Document</em><em>]</em>) – Documents to compress.</p></li>
<li><p><strong>query</strong> (<em>str</em>) – Query to consider.</p></li>
<li><p><strong>callbacks</strong> (<em>Callbacks</em><em>, </em><em>optional</em>) – Callbacks to run during the compression process, defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <code class="xref py py-attr docutils literal notranslate"><span class="pre">top_n</span></code> highest-ranked documents</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sequence[Document]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="langchain_dartmouth – LangChain components for Dartmouth’s on-premise models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright by Simon Stone for Dartmouth Libraries under Creative Commons CC BY-NC 4.0 License.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>